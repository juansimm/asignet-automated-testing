# Test Plan: Playwright Definitions API Docs

## Overview

- **Target URL:** https://playwright.dev/docs/test-agents#agent-definitions
- **Test Objective:** Verify the presence of the text "npx playwright init-agents --loop=vscode" on the Playwright documentation page
- **File:** specs/test-plan_20260219_200829.md
- **Created:** 2026-02-19

---

## Scenario 1: Verify Text Presence on Documentation Page

### Objective
Navigate to the Playwright Test Agents documentation page and verify that the command `npx playwright init-agents --loop=vscode` is present in the page content.

### Preconditions
- Browser is launched with a fresh state
- No previous page navigation has occurred

### Test Steps

1. **Navigate to target URL**
   - Step: Navigate to `https://playwright.dev/docs/test-agents#agent-definitions`
   - Expected: Page loads successfully, URL matches target

2. **Verify page title**
   - Step: Check that the page title contains "Agents" or "Playwright"
   - Locator: `page.title()`
   - Assertion: Title should contain "Playwright" and "Agents"

3. **Verify main heading is visible**
   - Step: Locate and verify the H1 heading "Playwright Test Agents"
   - Locator: `getByRole('heading', { name: 'Playwright Test Agents', level: 1 })`
   - Assertion: Heading is visible on the page

4. **Verify target code snippet exists in page content**
   - Step: Search for the text "npx playwright init-agents --loop=vscode" in the entire page
   - Locator: `page.getByText('npx playwright init-agents --loop=vscode')`
   - Assertion: The code snippet text is present in the page

5. **Verify the snippet is in a code block**
   - Step: Locate the code snippet within a `<pre>` or `<code>` element
   - Locator: `page.locator('code').filter({ hasText: 'npx playwright init-agents --loop=vscode' })`
   - Assertion: The text is found within a code element

6. **Verify the anchor link works**
   - Step: Verify the URL contains the hash `#agent-definitions`
   - Locator: `page.url()`
   - Assertion: Current URL includes `#agent-definitions`

---

## Scenario 2: Verify Tabbed Interface Functionality

### Objective
Verify that the tabbed interface in the "Getting Started" section displays the correct command for VS Code.

### Preconditions
- Page from Scenario 1 is loaded

### Test Steps

1. **Verify VS Code tab is active**
   - Step: Check that the VS Code tab is selected by default
   - Locator: `getByRole('tab', { name: 'VS Code' })`
   - Assertion: VS Code tab has attribute `aria-selected="true"` or appropriate active state

2. **Verify command is displayed in active tab**
   - Step: Verify the command "npx playwright init-agents --loop=vscode" is visible when VS Code tab is active
   - Locator: `page.locator('.tab-panel--active code').filter({ hasText: 'npx playwright init-agents --loop=vscode' })`
   - Assertion: Command is visible in the active tab content

---

## Scenario 3: Navigation and Page Structure Validation

### Objective
Verify that the page structure is intact and navigation elements work correctly.

### Preconditions
- Page from Scenario 1 is loaded

### Test Steps

1. **Verify sidebar navigation exists**
   - Step: Check that the sidebar with navigation links is present
   - Locator: `page.locator('nav.sidebar')` or `page.locator('[class*="sidebar"]')`
   - Assertion: Sidebar element is visible

2. **Verify "On This Page" TOC exists**
   - Step: Check that the table of contents for the current page is present
   - Locator: `page.locator('nav.table-of-contents')` or `page.locator('[class*="toc"]')`
   - Assertion: TOC element is visible

3. **Verify breadcrumb navigation**
   - Step: Check that breadcrumb shows "Home > Playwright Test > Agents"
   - Locator: `page.locator('nav.breadcrumbs')` or `page.getByText('Agents')`
   - Assertion: Breadcrumb contains "Agents" link

---

## Assertions Summary

| Step | Element | Assertion Type | Expected Result |
|------|---------|----------------|-----------------|
| 1 | Page URL | equals | Contains `#agent-definitions` |
| 2 | Page Title | contains | "Playwright" |
| 3 | Main Heading | isVisible | H1 "Playwright Test Agents" |
| 4 | Code Snippet | isVisible | Text "npx playwright init-agents --loop=vscode" |
| 5 | Code Element | exists | Snippet inside `<code>` element |
| 6 | Tab Active | hasAttribute | VS Code tab is selected |
| 7 | Sidebar | isVisible | Navigation sidebar present |
| 8 | TOC | isVisible | Table of contents present |

---

## Locator Strategy Priority

1. **Role-based:** `getByRole('heading')`, `getByRole('tab')`
2. **Text-based:** `getByText()`, `filter({ hasText: ... })`
3. **Semantic:** `locator('code')`, `locator('pre')`
4. **URL-based:** `page.url()` for hash verification

---

## Success Criteria

- All tests pass independently
- Tests are deterministic and repeatable
- No flaky assertions (avoid timing-dependent checks)
- Clear failure messages for debugging

---

## Notes

- This test plan focuses on **content verification** rather than complex interactions
- The primary goal is confirming the presence of the specific command string in the documentation
- Navigation tests are secondary to the main objective
- All locators prioritize stability over brevity
